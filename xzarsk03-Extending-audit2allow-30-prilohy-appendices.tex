% Tento soubor nahraďte vlastním souborem s přílohami (nadpisy níže jsou pouze pro příklad)
% This file should be replaced with your file with an appendices (headings below
% are examples only)

% Umístění obsahu paměťového média do příloh je vhodné konzultovat s vedoucím
% Placing of table of contents of the memory media here should be consulted with
% a supervisor
\chapter{Contents of Enclosed Memory Media}

The contents of the enclosed memory media:
\begin{description}
    \item [\texttt{/packages}] RPM packages for Fedora 27
    \item [\texttt{/source-packages}] Source RPM packages
    \item [\texttt{/selinux-xperms}] Source codes for extended permission support
    \item [\texttt{/selinux-restorecon}] Source codes for checking mislabeled
        files
    \item [\texttt{/patches}] Source codes as a patches to the upstream
        repository
    \item [\texttt{/tests}] Integration tests
    \item [\texttt{/thesis}] Sources for building the text of the thesis
    \item [\texttt{Extending-audit2allow.pdf}] Text of the thesis
\end{description}

\chapter{Manual}

\section{Upstream Repository}

Improvements to audit2allow were implemented as a series of patches to a 2.8-rc1
version of the SELinux userspace upstream repository. To install upstream
version of userspace, follow the instructions in \texttt{README}.

The \texttt{/selinux-xperms} directory contains the SELinux userspace repository
with support for extended permissions applied on top of the \texttt{f04d6401}
commit from the upstream repository.

The \texttt{/selinux-restorecon} directory contains the SELinux userspace
repository with support for checking mislabeled files applied on top of the
\texttt{f04d6401} commit from the upstream repository.

The \texttt{/patches} directory contains patches against the \texttt{f04d6401}
commit.

\section{Fedora packages}

Patches for both extended permission support and support for checking mislabeled
files were applied to Fedora userspace packages and can be installed on
Fedora~27. The \texttt{/packages} directory contains RPM packages. The
\texttt{/source-packages} directory contains SRPM packages with source codes.

These packages can be installed directly using the dnf command:
\begin{lstlisting}
# dnf install packages/*.rpm
\end{lstlisting}
or from a COPR repository:
\begin{lstlisting}
# dnf copr enable janzarsky/selinux-fedora
# dnf update checkpolicy libselinux libsemanage libsepol policycoreutils \
    secilc
\end{lstlisting}

\section{Tests}
To run unit tests, install modified packages on the system. Then navigate to the
\\ \texttt{/selinux-xperms} or \texttt{/selinux-restorecon} directory and run
tests from the upstream repository. As a part of this thesis, tests in
\texttt{selinux/python/sepolgen/tests} and \\
\texttt{selinux/python/audit2allow/test\_audit2allow} were implemented.

The \texttt{/tests} directory contains integration tests. These tests require
the beakerlib library. To run the tests, install modified packages on the system
and run the \texttt{runtest.sh} files.

